<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Islamic Inheritance Calculator — QuickNisab</title>
  <link rel="stylesheet" href="../style.css" />
  <meta name="description"
    content="Calculate Islamic inheritance distribution (Mirath / Faraid) using this easy and accurate online calculator.">
  <meta name="keywords"
    content="inheritance calculator, islamic inheritance, mirath, faraid, quicknisab, estate distribution">
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2826469813017365"
    crossorigin="anonymous"></script>

  <style>
    .subtitle {
      color: var(--muted);
      margin-bottom: 12px
    }

    .tool-panel {
      margin-top: 18px;
      padding: 16px;
      border-radius: 8px;
      background: #fff;
      border: 1px solid #eee
    }

    .form-row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 12px
    }

    .form-row label {
      display: block;
      font-size: 0.9rem;
      color: #333
    }

    input[type="number"],
    select {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 6px;
      width: 200px
    }

    button {
      background: var(--accent);
      color: #fff;
      padding: 10px 14px;
      border: 0;
      border-radius: 8px;
      cursor: pointer
    }

    #result {
      display: none;
      margin-top: 18px;
      background: #fbfffb;
      border-radius: 8px;
      padding: 12px;
      border: 1px solid #e6f1ea
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed #eee
    }

    .result-row:last-child {
      border-bottom: none
    }

    .disclaimer {
      font-size: 0.85rem;
      color: #666;
      margin-top: 20px;
    }
  </style>
</head>

<body>

  <div class="app-wrapper">
    <aside class="sidebar">
      <h2>QuickNisab</h2>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/zakaat-calculator">Zakat Calculator</a></li>
        <li><a href="/inheritance-calculator">Inheritance Calculator</a></li>
        <li><a href="/nisab-values">Nisab Values</a></li>
        <li><a href="/privacy-policy">Privacy Policy</a></li>
        <li><a href="/disclaimer">Disclaimer</a></li>
      </ul>
    </aside>

    <main class="main-content">
      <div class="container">
        <h1>Islamic Inheritance Calculator</h1>

        <article class="lead">
          <h2>Understanding Islamic Inheritance (Mirath / Faraid)</h2>
          <p>
            Islamic inheritance follows precise rules from the Quran and Sunnah (Sunni jurisprudence). This updated
            calculator implements correct fixed shares, residuary distribution, and proportional reduction ('Awl) when
            shares exceed the estate.
          </p>
          <p class="disclaimer">
            <strong>Note:</strong> This is an improved version with more accurate logic for common cases. It covers
            husband/wife, sons, daughters, father, and mother. For complex scenarios (e.g., siblings, grandparents,
            multiple wives), consult a qualified Islamic scholar.
          </p>
        </article>

        <section class="tool-panel">
          <h2>Interactive Inheritance Calculator</h2>

          <div class="form-row">
            <div>
              <label for="estateValue">Total Estate Value (assets minus debts)</label>
              <input type="number" id="estateValue" min="0" value="100000">
            </div>
          </div>

          <h3>Surviving Heirs</h3>
          <div class="form-row">
            <div>
              <label for="spouse">Spouse:</label>
              <select id="spouse">
                <option value="none">None</option>
                <option value="husband">Husband (deceased is wife)</option>
                <option value="wife">Wife (deceased is husband)</option>
              </select>
            </div>
            <div>
              <label for="sons">Number of Sons:</label>
              <input type="number" id="sons" min="0" value="0">
            </div>
            <div>
              <label for="daughters">Number of Daughters:</label>
              <input type="number" id="daughters" min="0" value="0">
            </div>
            <div>
              <label for="father">Father Alive?</label>
              <select id="father">
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
            </div>
            <div>
              <label for="mother">Mother Alive?</label>
              <select id="mother">
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
            </div>
          </div>

          <div style="margin-top:10px;">
            <button id="calcBtn">Calculate Inheritance</button>
          </div>

          <div id="result">
            <h3>Calculated Shares</h3>
            <div id="shares"></div>
            <p class="disclaimer">Results are approximate for educational purposes. Always verify with a scholar.</p>
          </div>
        </section>

        <div style="margin-top:20px;">
          <ins class="adsbygoogle" style="display:block; text-align:center; margin: 20px 0;"
            data-ad-client="ca-pub-2826469813017365" data-ad-slot="REPLACE_WITH_REAL_AD_SLOT_ID" data-ad-format="auto"
            data-full-width-responsive="true"></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>

        <footer>
          <a href="/privacy-policy">Privacy Policy</a> | <a href="/disclaimer">Disclaimer</a>
        </footer>
      </div>
    </main>
  </div>

  <script>
    function calculateInheritance() {
      const estate = Number(document.getElementById('estateValue').value);
      const spouse = document.getElementById('spouse').value;
      const sons = Number(document.getElementById('sons').value);
      const daughters = Number(document.getElementById('daughters').value);
      const fatherAlive = document.getElementById('father').value === 'yes';
      const motherAlive = document.getElementById('mother').value === 'yes';

      if (estate <= 0) {
        alert("Estate must be greater than zero");
        return;
      }

      const hasChildren = sons + daughters > 0;
      const hasSons = sons > 0;

      let fixedShares = {};   // fractions
      let results = {};      // money values

      /* ───── FIXED SHARES ───── */

      // Spouse
      if (spouse === 'husband') {
        fixedShares.Husband = hasChildren ? 1 / 4 : 1 / 2;
      }
      if (spouse === 'wife') {
        fixedShares.Wife = hasChildren ? 1 / 8 : 1 / 4;
      }

      // Mother
      if (motherAlive) {
        fixedShares.Mother = hasChildren ? 1 / 6 : 1 / 3;
      }

      // Father (fixed only when children exist)
      if (fatherAlive && hasChildren) {
        fixedShares.Father = 1 / 6;
      }

      // Daughters fixed share (only if no sons)
      if (!hasSons && daughters > 0) {
        fixedShares.Daughters = (daughters === 1) ? 1 / 2 : 2 / 3;
      }

      /* ───── AWL ───── */

      let fixedTotal = Object.values(fixedShares).reduce((a, b) => a + b, 0);
      let awlDivisor = fixedTotal > 1 ? fixedTotal : 1;

      let allocated = 0;

      /* ───── APPLY FIXED SHARES ───── */

      for (let heir in fixedShares) {
        let amount = (fixedShares[heir] / awlDivisor) * estate;

        if (heir === 'Daughters') {
          results["Each Daughter"] = (amount / daughters).toFixed(2);
          results["Total Daughters"] = amount.toFixed(2);
        } else {
          results[heir] = amount.toFixed(2);
        }

        allocated += amount;
      }

      /* ───── RESIDUE ───── */

      let residue = estate - allocated;

      // Children as residuary
      if (residue > 0 && hasSons) {
        const totalParts = sons * 2 + daughters;
        const partValue = residue / totalParts;

        if (sons > 0) {
          results["Each Son"] = (partValue * 2).toFixed(2);
        }
        if (daughters > 0) {
          results["Each Daughter (residue)"] = partValue.toFixed(2);
        }

        residue = 0;
      }

      // Father as residuary (no sons)
      if (residue > 0 && fatherAlive && !hasSons) {
        results["Father (residue)"] = residue.toFixed(2);
        residue = 0;
      }

      /* ───── RADD (RETURN) ───── */
      if (residue > 0) {
        const raddHeirs = Object.keys(fixedShares)
          .filter(h => h !== 'Husband' && h !== 'Wife');

        if (raddHeirs.length > 0) {
          let raddTotal = 0;
          raddHeirs.forEach(h => raddTotal += fixedShares[h]);

          raddHeirs.forEach(h => {
            let extra = (fixedShares[h] / raddTotal) * residue;

            if (h === 'Daughters') {
              let total = Number(results["Total Daughters"]) + extra;
              results["Total Daughters"] = total.toFixed(2);
              results["Each Daughter"] = (total / daughters).toFixed(2);
            } else {
              results[h] = (Number(results[h]) + extra).toFixed(2);
            }
          });

          residue = 0;
        }
      }

      /* ───── DISPLAY ───── */

      const sharesDiv = document.getElementById("shares");
      sharesDiv.innerHTML = "";

      let totalShown = 0;

      for (let key in results) {

        sharesDiv.innerHTML += `
    <div class="result-row">
      <span>${key}</span>
      <strong>${results[key]}</strong>
    </div>`;

        // Count totals correctly
        if (
          key.startsWith("Total ") ||           // Total Daughters, Total Sons
          key === "Father" ||
          key === "Father (residue)" ||
          key === "Mother" ||
          key === "Husband" ||
          key === "Wife"
        ) {
          totalShown += Number(results[key]);
        }

        // SPECIAL CASE: single son only
        if (
          key === "Each Son" &&
          !("Total Sons" in results)
        ) {
          totalShown += Number(results[key]);
        }
      }
      
      document.getElementById("result").style.display = "block";

    }

    document.getElementById("calcBtn")
      .addEventListener("click", calculateInheritance);
  </script>


</body>

</html>